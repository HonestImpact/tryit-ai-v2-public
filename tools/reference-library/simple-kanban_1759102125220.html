<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Kanban - 3-Column Workflow Board</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1400px; margin: 20px auto; padding: 20px; }
        .kanban-container { background: #f8f9fa; padding: 20px; border-radius: 8px; }
        .board-header { display: flex; justify-content: space-between; align-items: center; margin: 20px 0; }
        .board-title { font-size: 1.5em; font-weight: bold; color: #333; }
        .board-controls { display: flex; gap: 10px; }
        .control-btn { padding: 8px 15px; border: 1px solid #ccc; background: white; border-radius: 4px; cursor: pointer; }
        .control-btn:hover { background: #f8f9fa; }
        .add-task-btn { background: #28a745; color: white; border: none; }
        .add-task-btn:hover { background: #218838; }
        .kanban-board { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin: 20px 0; min-height: 600px; }
        .column { background: white; border-radius: 8px; padding: 15px; border: 1px solid #ddd; }
        .column-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 6px; }
        .column-title { font-weight: bold; display: flex; align-items: center; gap: 8px; }
        .column-count { background: #6c757d; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.8em; }
        .column-todo .column-count { background: #dc3545; }
        .column-doing .column-count { background: #ffc107; color: #212529; }
        .column-done .column-count { background: #28a745; }
        .tasks-container { min-height: 500px; }
        .task-card { background: #fff; border: 1px solid #e9ecef; border-radius: 6px; padding: 12px; margin: 8px 0; cursor: grab; transition: all 0.2s; position: relative; }
        .task-card:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.1); transform: translateY(-1px); }
        .task-card.dragging { opacity: 0.5; transform: rotate(5deg); }
        .task-title { font-weight: bold; margin-bottom: 5px; }
        .task-description { color: #666; font-size: 0.9em; margin-bottom: 8px; }
        .task-meta { display: flex; justify-content: space-between; align-items: center; font-size: 0.8em; color: #999; }
        .task-priority { padding: 2px 6px; border-radius: 3px; font-size: 0.7em; font-weight: bold; }
        .priority-high { background: #ffebee; color: #c62828; }
        .priority-medium { background: #fff3e0; color: #ef6c00; }
        .priority-low { background: #e8f5e8; color: #2e7d32; }
        .task-actions { position: absolute; top: 8px; right: 8px; opacity: 0; transition: opacity 0.2s; }
        .task-card:hover .task-actions { opacity: 1; }
        .task-action-btn { background: none; border: none; cursor: pointer; padding: 2px; margin: 0 2px; color: #666; }
        .task-action-btn:hover { color: #333; }
        .add-task-form { background: white; border: 1px solid #ddd; border-radius: 6px; padding: 15px; margin: 10px 0; display: none; }
        .add-task-form.active { display: block; }
        .form-row { margin: 10px 0; }
        .form-row label { display: block; margin-bottom: 5px; font-weight: bold; color: #333; }
        .form-row input, .form-row textarea, .form-row select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; }
        .form-row textarea { height: 60px; resize: vertical; }
        .form-buttons { display: flex; gap: 10px; justify-content: flex-end; }
        .form-btn { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; }
        .form-btn.save { background: #28a745; color: white; }
        .form-btn.cancel { background: #6c757d; color: white; }
        .form-btn:hover { opacity: 0.8; }
        .drop-zone { min-height: 50px; border: 2px dashed transparent; border-radius: 6px; transition: all 0.2s; }
        .drop-zone.drag-over { border-color: #007bff; background: #f0f8ff; }
        .stats-bar { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin: 20px 0; }
        .stat-card { background: white; padding: 15px; border-radius: 6px; text-align: center; border-left: 4px solid #007bff; }
        .stat-value { font-size: 1.5em; font-weight: bold; color: #007bff; }
        .stat-label { color: #666; font-size: 0.9em; }
        .export-controls { text-align: center; margin: 20px 0; }
        .export-btn { background: #6f42c1; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 0 5px; }
        .export-btn:hover { background: #5a32a3; }
        .templates { display: flex; gap: 10px; margin: 15px 0; flex-wrap: wrap; }
        .template-btn { background: #17a2b8; color: white; padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .template-btn:hover { background: #138496; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
        .modal-content { background: white; margin: 5% auto; padding: 20px; width: 90%; max-width: 500px; border-radius: 8px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .close-modal { background: none; border: none; font-size: 1.5em; cursor: pointer; }
    </style>
</head>
<body>
    <div class="kanban-container">
        <h2>üìã Simple Kanban - 3-Column Workflow Board</h2>
        <p>Organize tasks with drag-and-drop simplicity. Perfect for project management, personal productivity, and team collaboration.</p>
        
        <div class="board-header">
            <div class="board-title" id="boardTitle">My Project Board</div>
            <div class="board-controls">
                <div class="templates">
                    <button class="template-btn" onclick="loadTemplate('personal')">üì± Personal Tasks</button>
                    <button class="template-btn" onclick="loadTemplate('software')">üíª Software Dev</button>
                    <button class="template-btn" onclick="loadTemplate('marketing')">üìà Marketing</button>
                    <button class="template-btn" onclick="loadTemplate('content')">‚úçÔ∏è Content</button>
                </div>
                <button class="control-btn add-task-btn" onclick="showAddTaskForm()">+ Add Task</button>
                <button class="control-btn" onclick="showBoardSettings()">‚öôÔ∏è Settings</button>
                <button class="control-btn" onclick="clearBoard()">üóëÔ∏è Clear</button>
            </div>
        </div>

        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-value" id="totalTasks">0</div>
                <div class="stat-label">Total Tasks</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="todoTasks">0</div>
                <div class="stat-label">To Do</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="doingTasks">0</div>
                <div class="stat-label">In Progress</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="doneTasks">0</div>
                <div class="stat-label">Completed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="completionRate">0%</div>
                <div class="stat-label">Completion Rate</div>
            </div>
        </div>

        <div class="kanban-board">
            <div class="column column-todo">
                <div class="column-header">
                    <div class="column-title">
                        üî¥ To Do
                        <span class="column-count" id="todoCount">0</span>
                    </div>
                </div>
                <div class="tasks-container drop-zone" data-column="todo" id="todoTasks">
                    <!-- Tasks will be added here -->
                </div>
            </div>

            <div class="column column-doing">
                <div class="column-header">
                    <div class="column-title">
                        üü° In Progress
                        <span class="column-count" id="doingCount">0</span>
                    </div>
                </div>
                <div class="tasks-container drop-zone" data-column="doing" id="doingTasks">
                    <!-- Tasks will be added here -->
                </div>
            </div>

            <div class="column column-done">
                <div class="column-header">
                    <div class="column-title">
                        üü¢ Done
                        <span class="column-count" id="doneCount">0</span>
                    </div>
                </div>
                <div class="tasks-container drop-zone" data-column="done" id="doneTasks">
                    <!-- Tasks will be added here -->
                </div>
            </div>
        </div>

        <div class="export-controls">
            <button class="export-btn" onclick="exportBoard()">üì§ Export Board</button>
            <button class="export-btn" onclick="importBoard()">üì• Import Board</button>
            <button class="export-btn" onclick="saveBoard()">üíæ Save Board</button>
            <button class="export-btn" onclick="loadBoard()">üìÅ Load Board</button>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div id="addTaskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Add New Task</h3>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <form id="taskForm">
                <div class="form-row">
                    <label>Task Title:</label>
                    <input type="text" id="taskTitle" required placeholder="Enter task title">
                </div>
                <div class="form-row">
                    <label>Description:</label>
                    <textarea id="taskDescription" placeholder="Optional description"></textarea>
                </div>
                <div class="form-row">
                    <label>Priority:</label>
                    <select id="taskPriority">
                        <option value="low">Low</option>
                        <option value="medium" selected>Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Assignee:</label>
                    <input type="text" id="taskAssignee" placeholder="Optional assignee">
                </div>
                <div class="form-row">
                    <label>Column:</label>
                    <select id="taskColumn">
                        <option value="todo">To Do</option>
                        <option value="doing">In Progress</option>
                        <option value="done">Done</option>
                    </select>
                </div>
                <div class="form-buttons">
                    <button type="button" class="form-btn cancel" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="form-btn save">Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Board Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Board Settings</h3>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <div class="form-row">
                <label>Board Title:</label>
                <input type="text" id="settingsBoardTitle" placeholder="Board title">
            </div>
            <div class="form-buttons">
                <button type="button" class="form-btn cancel" onclick="closeModal()">Cancel</button>
                <button type="button" class="form-btn save" onclick="saveBoardSettings()">Save Settings</button>
            </div>
        </div>
    </div>

    <script>
        let tasks = [];
        let draggedTask = null;
        let editingTaskId = null;

        class Task {
            constructor(title, description = '', priority = 'medium', assignee = '', column = 'todo') {
                this.id = Date.now() + Math.random();
                this.title = title;
                this.description = description;
                this.priority = priority;
                this.assignee = assignee;
                this.column = column;
                this.createdDate = new Date().toISOString();
                this.updatedDate = new Date().toISOString();
            }

            update(data) {
                Object.assign(this, data);
                this.updatedDate = new Date().toISOString();
            }
        }

        const templates = {
            personal: [
                new Task('Plan weekend activities', 'Research fun activities for this weekend', 'medium', 'Me', 'todo'),
                new Task('Organize digital photos', 'Sort and backup photos from last month', 'low', 'Me', 'todo'),
                new Task('Read chapter 3', 'Continue reading productivity book', 'medium', 'Me', 'doing'),
                new Task('Weekly grocery shopping', 'Buy fresh ingredients for meal prep', 'high', 'Me', 'done')
            ],
            software: [
                new Task('Design user authentication', 'Create wireframes and user flow', 'high', 'Designer', 'todo'),
                new Task('Set up database schema', 'Define tables and relationships', 'high', 'Backend Dev', 'todo'),
                new Task('Implement login API', 'REST endpoints for authentication', 'high', 'Backend Dev', 'doing'),
                new Task('Create project structure', 'Set up React app with routing', 'medium', 'Frontend Dev', 'done')
            ],
            marketing: [
                new Task('Content calendar planning', 'Plan next months social media posts', 'high', 'Content Manager', 'todo'),
                new Task('Competitor analysis', 'Research top 5 competitors strategies', 'medium', 'Marketing Analyst', 'todo'),
                new Task('Email campaign design', 'Create newsletter template', 'medium', 'Designer', 'doing'),
                new Task('Brand guidelines update', 'Refresh logo and color palette', 'low', 'Brand Manager', 'done')
            ],
            content: [
                new Task('Blog post: "10 Tips for Remote Work"', 'Research and write 1500-word article', 'high', 'Writer', 'todo'),
                new Task('Create infographic templates', 'Design 3 reusable templates', 'medium', 'Designer', 'todo'),
                new Task('Record podcast episode', 'Interview with industry expert', 'high', 'Host', 'doing'),
                new Task('Update FAQ page', 'Add 10 new frequently asked questions', 'low', 'Content Editor', 'done')
            ]
        };

        function showAddTaskForm() {
            editingTaskId = null;
            document.getElementById('modalTitle').textContent = 'Add New Task';
            document.getElementById('taskForm').reset();
            document.getElementById('addTaskModal').style.display = 'block';
        }

        function editTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (task) {
                editingTaskId = taskId;
                document.getElementById('modalTitle').textContent = 'Edit Task';
                document.getElementById('taskTitle').value = task.title;
                document.getElementById('taskDescription').value = task.description;
                document.getElementById('taskPriority').value = task.priority;
                document.getElementById('taskAssignee').value = task.assignee;
                document.getElementById('taskColumn').value = task.column;
                document.getElementById('addTaskModal').style.display = 'block';
            }
        }

        function deleteTask(taskId) {
            if (confirm('Delete this task?')) {
                tasks = tasks.filter(t => t.id !== taskId);
                updateBoard();
            }
        }

        function showBoardSettings() {
            document.getElementById('settingsBoardTitle').value = document.getElementById('boardTitle').textContent;
            document.getElementById('settingsModal').style.display = 'block';
        }

        function saveBoardSettings() {
            const newTitle = document.getElementById('settingsBoardTitle').value.trim();
            if (newTitle) {
                document.getElementById('boardTitle').textContent = newTitle;
            }
            closeModal();
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
        }

        document.getElementById('taskForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('taskTitle').value.trim();
            const description = document.getElementById('taskDescription').value.trim();
            const priority = document.getElementById('taskPriority').value;
            const assignee = document.getElementById('taskAssignee').value.trim();
            const column = document.getElementById('taskColumn').value;
            
            if (!title) return;
            
            if (editingTaskId) {
                const task = tasks.find(t => t.id === editingTaskId);
                if (task) {
                    task.update({ title, description, priority, assignee, column });
                }
            } else {
                const task = new Task(title, description, priority, assignee, column);
                tasks.push(task);
            }
            
            updateBoard();
            closeModal();
        });

        function updateBoard() {
            updateStats();
            renderTasks();
        }

        function updateStats() {
            const todoCount = tasks.filter(t => t.column === 'todo').length;
            const doingCount = tasks.filter(t => t.column === 'doing').length;
            const doneCount = tasks.filter(t => t.column === 'done').length;
            const totalCount = tasks.length;
            const completionRate = totalCount > 0 ? Math.round((doneCount / totalCount) * 100) : 0;
            
            document.getElementById('totalTasks').textContent = totalCount;
            document.getElementById('todoTasks').textContent = todoCount;
            document.getElementById('doingTasks').textContent = doingCount;
            document.getElementById('doneTasks').textContent = doneCount;
            document.getElementById('completionRate').textContent = completionRate + '%';
            
            document.getElementById('todoCount').textContent = todoCount;
            document.getElementById('doingCount').textContent = doingCount;
            document.getElementById('doneCount').textContent = doneCount;
        }

        function renderTasks() {
            const columns = ['todo', 'doing', 'done'];
            
            columns.forEach(column => {
                const container = document.getElementById(column + 'Tasks');
                const columnTasks = tasks.filter(t => t.column === column);
                
                container.innerHTML = columnTasks.map(task => `
                    <div class="task-card" draggable="true" data-task-id="${task.id}">
                        <div class="task-actions">
                            <button class="task-action-btn" onclick="editTask(${task.id})" title="Edit">‚úèÔ∏è</button>
                            <button class="task-action-btn" onclick="deleteTask(${task.id})" title="Delete">üóëÔ∏è</button>
                        </div>
                        <div class="task-title">${task.title}</div>
                        ${task.description ? `<div class="task-description">${task.description}</div>` : ''}
                        <div class="task-meta">
                            <span class="task-priority priority-${task.priority}">${task.priority.toUpperCase()}</span>
                            ${task.assignee ? `<span>${task.assignee}</span>` : ''}
                        </div>
                    </div>
                `).join('');
            });
            
            setupDragAndDrop();
        }

        function setupDragAndDrop() {
            // Add drag event listeners to all task cards
            document.querySelectorAll('.task-card').forEach(card => {
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragend', handleDragEnd);
            });
            
            // Add drop event listeners to all drop zones
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('dragenter', handleDragEnter);
                zone.addEventListener('dragleave', handleDragLeave);
                zone.addEventListener('drop', handleDrop);
            });
        }

        function handleDragStart(e) {
            draggedTask = parseInt(e.target.getAttribute('data-task-id'));
            e.target.classList.add('dragging');
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedTask = null;
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDragEnter(e) {
            e.preventDefault();
            e.target.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            e.target.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.target.classList.remove('drag-over');
            
            const newColumn = e.target.getAttribute('data-column');
            const task = tasks.find(t => t.id === draggedTask);
            
            if (task && newColumn && task.column !== newColumn) {
                task.column = newColumn;
                task.updatedDate = new Date().toISOString();
                updateBoard();
            }
        }

        function loadTemplate(templateName) {
            if (confirm(`Load ${templateName} template? This will replace current tasks.`)) {
                tasks = [...templates[templateName]];
                updateBoard();
            }
        }

        function clearBoard() {
            if (confirm('Clear all tasks? This cannot be undone.')) {
                tasks = [];
                updateBoard();
            }
        }

        function exportBoard() {
            const boardData = {
                title: document.getElementById('boardTitle').textContent,
                tasks: tasks,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(boardData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `kanban_board_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function importBoard() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const boardData = JSON.parse(e.target.result);
                            if (confirm(`Import board "${boardData.title}"? This will replace current tasks.`)) {
                                tasks = boardData.tasks || [];
                                if (boardData.title) {
                                    document.getElementById('boardTitle').textContent = boardData.title;
                                }
                                updateBoard();
                                alert('Board imported successfully!');
                            }
                        } catch (error) {
                            alert('Error importing board: ' + error.message);
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function saveBoard() {
            const boardData = {
                title: document.getElementById('boardTitle').textContent,
                tasks: tasks
            };
            localStorage.setItem('kanban_board', JSON.stringify(boardData));
            alert('Board saved locally!');
        }

        function loadBoard() {
            const saved = localStorage.getItem('kanban_board');
            if (saved) {
                if (confirm('Load saved board? This will replace current tasks.')) {
                    const boardData = JSON.parse(saved);
                    tasks = boardData.tasks || [];
                    if (boardData.title) {
                        document.getElementById('boardTitle').textContent = boardData.title;
                    }
                    updateBoard();
                    alert('Board loaded!');
                }
            } else {
                alert('No saved board found');
            }
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                closeModal();
            }
        });

        // Initialize with sample data
        loadTemplate('software');
    </script>
</body>
</html>
